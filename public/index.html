<!DOCTYPE html>
<html>
<head>
  <title>PDF Upload Form</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>
  <h1>Upload PDF</h1>
  <form action="/upload" method="POST" enctype="multipart/form-data">
    <input type="file" name="pdf" accept=".pdf" required>
    <button type="submit">Upload</button>
  </form>

  <h1>Applicants List</h1>
  <table>
    <tr>
      <th>ID</th>
      <th>Candidate name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>LinkedIn</th>
      <th>PDF</th>
    </tr>
  </table>

  <script>
    const table = document.querySelector('table');

    fetch('/applicants')
      .then(response => response.json())
      .then(applicants => {
        applicants.forEach(applicant => {
          const row = table.insertRow();
          row.innerHTML = `
            <td>${applicant.id}</td>
            <td>${applicant.firstName + " " + applicant.lastName}</td>
            <td>${applicant.email}</td>
            <td>${applicant.mobile}</td>
            <td><a href=${applicant.linkedin} target="_blank">Link</a></td>
            <td><a href="/download/${applicant._id}" target="_blank">Download PDF</a></td>
          `;
        });
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  </script>
</body>
</html>
